include ~@common.blocks/primitives/heading/heading.pug

//- heading?: { tag: text }, example: { h3: 'awesome heading' }
//- name: name of group
//- length: number of stars
//- rate: init rate amount
//- titles:Array<string> - stars titles(hints)
//- disabled: same as fieldset disabled (disable all buttons)
mixin form-rate-button({ length = 5, titles = ['очень плохо', 'плохо', 'нормально', 'хорошо', 'очень хорошо'], heading = undefined, disabled = undefined, name = 'rate', rate = 3 } = {})
  .form-rate-button&attributes(attributes)
    -
      let counter = length;
    if heading
      +heading(heading)
    fieldset.form-rate-button__rating(disabled=disabled)
      while counter > 0
        -
          const currentID = `${name}-${counter}`;
          const checked = counter === rate ? 'checked' : undefined;
        input.form-rate-button__button-item(
          id=currentID,
          type="radio",
          name=name,
          checked=checked,
          value=counter
        )
        label.icon(for=currentID, tabindex="0", title=titles[counter - 1])= `количество звезд: ${counter}`
        - counter -= 1;
