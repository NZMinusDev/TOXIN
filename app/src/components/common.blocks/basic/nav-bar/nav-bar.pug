include ~@common.blocks/basic/nav-bar/__navigation-list/nav-bar__navigation-list.pug
include ~@common.blocks/primitives/button/button.pug

//- active?: {string} - key of items const object
//- status?: "confirmed" - add entering and registration btn or person link, default is "unconfirmed"
  //- Additional for "confirmed" status
    //- personHref: {string} - href for person account
    //- personName: {string} - person name
//- class?: class for component bem mix: such as positioning functionality

mixin nav-bar({ active = undefined, status = undefined, personHref = '/mock.html', personName = 'Константин Константинопольский' } = {})
  -
    const items = {// tip: maximum nesting is conditionally inf and you can set active?: 'active' only for children(parents would be automatically settled)
      'О нас': { href: '/mock.html' },
      Услуги: {
        href: '/mock.html',
        items: {
          'Услуга 1': { href: '/mock.html' },
          'Услуга 2': { href: '/mock.html' },
          'Услуга 3': { href: '/mock.html' },
          'Услуга 4': { href: '/mock.html' },
          'Услуга 5': { href: '/mock.html' },
        },
      },
      Вакансии: { href: '/mock.html' },
      Новости: { href: '/mock.html' },
      Соглашения: {
        href: '/mock.html',
        items: {
          'Соглашение 1': { href: '/mock.html' },
          'Соглашение 2': { href: '/mock.html' },
          'Соглашение 3': {
            href: '/mock.html',
            items: {
              'Соглашение 3-1': {
                href: '/mock.html',
                items: { 'Соглашение 3-1-1': { href: '/mock.html' } },
              },
              'Соглашение 3-2': { href: '/mock.html' },
            },
          },
        },
      },
    }
  header.nav-bar.content-container&attributes(attributes)
    section.nav-bar__logo
      .logo.logo_color-gradient-primary
      span.logo__title TOXIN
    nav.nav-bar__navigation
      +nav-bar__navigation-list(active, items)
    section.nav-bar__login(
      class=status === 'confirmed' ? 'nav-bar__login_isConfirmed' : 'nav-bar__login_isUnConfirmed'
    )
      case status
        when "confirmed"
          a.nav-bar__person(href=personHref, title="в личный кабинет")= personName
        default
          a(href="/mock.html")
            +button({ mod: 'bordered' }).nav-bar__button(
              type="button",
              value="Войти",
              tabindex="-1"
            )
          a(href="/mock.html")
            +button.nav-bar__button(
              type="button",
              value="Зарегистрироваться",
              tabindex="-1"
            )
